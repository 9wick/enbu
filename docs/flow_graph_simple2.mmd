flowchart TD

    subgraph packages_agent_browser_adapter_src["packages/agent-browser-adapter/src"]
        executeCommand_18["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        asCliXpathSelector_21["asCliXpathSelector<br/><small>Result&lt;string & Brand&lt;'CliXpat...</small>"]
        asCliTextSelector_22["asCliTextSelector<br/><small>Result&lt;string & Brand&lt;'CliText...</small>"]
        executeCommand_27["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_60["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        validateAndExtractData_64["validateAndExtractData (+1)<br/><small>Result&lt;InferOutput&lt;T&gt;, AgentBr...</small>"]
        executeCommand_69["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_72["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_75["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        asCliXpathSelector_77["asCliXpathSelector<br/><small>Result&lt;string & Brand&lt;'CliXpat...</small>"]
        executeCommand_81["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        asCliTextSelector_87["asCliTextSelector<br/><small>Result&lt;string & Brand&lt;'CliText...</small>"]
        executeCommand_95["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_99["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_104["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_109["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_113["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_118["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_123["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        executeCommand_128["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        asFilePath_150["asFilePath<br/><small>Result&lt;string & Brand&lt;'FilePat...</small>"]
        executeCommand_159["executeCommand (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        isRecord_171["isRecord<br/><small>boolean</small>"]
        isRecord_174["isRecord<br/><small>boolean</small>"]
        isRecord_178["isRecord<br/><small>boolean</small>"]
        isRecord_182["isRecord<br/><small>boolean</small>"]
        checkAgentBrowser_190["checkAgentBrowser<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
    end

    subgraph packages_agent_browser_adapter_src_commands["packages/agent-browser-adapter/src/commands"]
        browserIsChecked_17["browserIsChecked<br/><small>ResultAsync&lt;( checked: boolean...</small>"]
        browserIsEnabled_26["browserIsEnabled<br/><small>ResultAsync&lt;( enabled: boolean...</small>"]
        browserIsVisible_37["browserIsVisible<br/><small>ResultAsync&lt;( visible: boolean...</small>"]
        browserWaitForText_46["browserWaitForText<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserWaitForText_50["browserWaitForText<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserWaitForSelector_51["browserWaitForSelector<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserIsVisible_54["browserIsVisible<br/><small>ResultAsync&lt;( visible: boolean...</small>"]
        browserEval_59["browserEval<br/><small>ResultAsync&lt;( result: unknown;...</small>"]
        browserScreenshot_63["browserScreenshot<br/><small>ResultAsync&lt;( path: string; ),...</small>"]
        browserWaitForFunction_68["browserWaitForFunction<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserWaitForUrl_71["browserWaitForUrl<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserWaitForLoad_74["browserWaitForLoad<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserWaitForText_78["browserWaitForText<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserWaitForSelector_79["browserWaitForSelector<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserWaitForMs_80["browserWaitForMs<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserWaitForText_88["browserWaitForText (+1)<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserScrollIntoView_92["browserScrollIntoView<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserScroll_94["browserScroll<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserSelect_98["browserSelect<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserHover_103["browserHover<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserPress_108["browserPress<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserFill_112["browserFill<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserType_117["browserType<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserClick_122["browserClick<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
        browserOpen_127["browserOpen<br/><small>ResultAsync&lt;( url: string; ), ...</small>"]
        browserScreenshot_151["browserScreenshot<br/><small>ResultAsync&lt;( path: string; ),...</small>"]
        browserClose_158["browserClose<br/><small>ResultAsync&lt;(), AgentBrowserEr...</small>"]
    end

    subgraph packages_core_src["packages/core/src"]
        runFlows_0["runFlows<br/><small>ResultAsync&lt;RunFlowsOutput, Or...</small>"]
        executeAllFlows_1["executeAllFlows<br/><small>Promise&lt;RunFlowsOutput&gt;</small>"]
        executeAllFlowsParallel_2["executeAllFlowsParallel (+1)<br/><small>Promise&lt;RunFlowsOutput&gt;</small>"]
        executeSingleFlow_3["executeSingleFlow<br/><small>Promise&lt;FlowRunSummary&gt;</small>"]
        generateSessionName_4["generateSessionName<br/><small>string</small>"]
        notifyFlowProgress_5["notifyFlowProgress<br/><small>Promise&lt;void&gt;</small>"]
        buildFlowExecutionOptions_6["buildFlowExecutionOptions<br/><small>FlowExecutionOptions</small>"]
        executeFlow_7["executeFlow<br/><small>ResultAsync&lt;FlowResult, AgentB...</small>"]
        buildExecutionContext_8["buildExecutionContext<br/><small>ExecutionContext</small>"]
        executeAllSteps_9["executeAllSteps (+1)<br/><small>Promise&lt;ExecuteAllStepsResult&gt;</small>"]
        isStepProgressCallback_10["isStepProgressCallback<br/><small>boolean</small>"]
        executeStep_11["executeStep (+1)<br/><small>Promise&lt;StepResult&gt;</small>"]
        executeResolvedCommand_12["executeResolvedCommand<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        handleAssertChecked_13["handleAssertChecked<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        getSelectorForErrorMessage_14["getSelectorForErrorMessage (+1)<br/><small>string</small>"]
        checkChecked_16["checkChecked<br/><small>ResultAsync&lt;CommandResult, Ass...</small>"]
        resolveCliSelector_20["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        handleAssertEnabled_23["handleAssertEnabled<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        getSelectorForErrorMessage_24["getSelectorForErrorMessage<br/><small>string</small>"]
        checkEnabled_25["checkEnabled<br/><small>ResultAsync&lt;CommandResult, Ass...</small>"]
        resolveCliSelector_29["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        handleAssertNotVisible_30["handleAssertNotVisible<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        getSelectorString_31["getSelectorString<br/><small>string</small>"]
        isTextSelector_32["isTextSelector<br/><small>boolean</small>"]
        handleTextSelectorNotVisible_33["handleTextSelectorNotVisible (+1)<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        getAndCheckNotVisible_36["getAndCheckNotVisible (+1)<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        getSelectorForErrorMessage_38["getSelectorForErrorMessage (+1)<br/><small>string</small>"]
        handleAssertVisible_42["handleAssertVisible<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        getSelectorString_43["getSelectorString<br/><small>string</small>"]
        isTextSelector_44["isTextSelector<br/><small>boolean</small>"]
        handleTextSelectorVisible_45["handleTextSelectorVisible<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        waitForElement_47["waitForElement<br/><small>ResultAsync&lt;undefined, AgentBr...</small>"]
        isTextSelector_48["isTextSelector<br/><small>boolean</small>"]
        getSelectorString_49["getSelectorString<br/><small>string</small>"]
        resolveCliSelector_52["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        getAndCheckVisibility_53["getAndCheckVisibility<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        getSelectorForErrorMessage_55["getSelectorForErrorMessage (+1)<br/><small>string</small>"]
        handleEval_58["handleEval<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        handleScreenshot_62["handleScreenshot<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        handleWait_66["handleWait<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        createResultMapper_67["createResultMapper<br/><small>&lt;T&gt;(output: T) =&gt; CommandResul...</small>"]
        handleScrollIntoView_83["handleScrollIntoView<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        getSelectorString_84["getSelectorString<br/><small>string</small>"]
        isTextSelector_85["isTextSelector<br/><small>boolean</small>"]
        handleTextSelectorScrollIntoView_86["handleTextSelectorScrollIntoView<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        handleCssOrRefScrollIntoView_90["handleCssOrRefScrollIntoView<br/><small>ResultAsync&lt;CommandResult, Exe...</small>"]
        resolveCliSelector_91["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        handleScroll_93["handleScroll<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        handleSelect_97["handleSelect<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        resolveCliSelector_101["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        handleHover_102["handleHover<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        resolveCliSelector_106["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        handlePress_107["handlePress<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        handleFill_111["handleFill<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        resolveCliSelector_115["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        handleType_116["handleType<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        resolveCliSelector_120["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        handleClick_121["handleClick<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        resolveCliSelector_125["resolveCliSelector<br/><small>ResultAsync&lt;CliSelector, Agent...</small>"]
        handleOpen_126["handleOpen<br/><small>ResultAsync&lt;CommandResult, Age...</small>"]
        processSelectorWait_130["processSelectorWait (+2) (+1)<br/><small>ResultAsync&lt;ResolvedCommand, S...</small>"]
        takeErrorScreenshot_148["takeErrorScreenshot (+1)<br/><small>Promise&lt;ScreenshotResult&gt;</small>"]
        captureErrorScreenshot_149["captureErrorScreenshot (+1)<br/><small>ResultAsync&lt;string, AgentBrows...</small>"]
        getScreenshotPath_161["getScreenshotPath<br/><small>string / undefined</small>"]
        loadAllFlows_164["loadAllFlows<br/><small>ResultAsync&lt;readonly Flow(), P...</small>"]
        loadSingleFlow_165["loadSingleFlow<br/><small>ResultAsync&lt;Flow, ParseError&gt;</small>"]
        parseYaml_166["parseYaml<br/><small>ResultAsync&lt;Flow, ParseError&gt;</small>"]
        parseFlowYaml_167["parseFlowYaml<br/><small>Result&lt;Flow, ParseError&gt;</small>"]
        resolveEnvVariables_168["resolveEnvVariables<br/><small>Result&lt;RawFlowData, ParseError...</small>"]
        mergeEnvMaps_169["mergeEnvMaps<br/><small>Record&lt;string, string&gt;</small>"]
        resolveStepVariables_170["resolveStepVariables<br/><small>Result&lt;unknown, ParseError&gt;</small>"]
        resolveObjectVariables_172["resolveObjectVariables<br/><small>Result&lt;void, ParseError&gt;</small>"]
        resolveStringVariables_173["resolveStringVariables<br/><small>Result&lt;string, ParseError&gt;</small>"]
        resolveObjectVariables_175["resolveObjectVariables<br/><small>Result&lt;void, ParseError&gt;</small>"]
        buildRawFlowData_176["buildRawFlowData<br/><small>RawFlowData</small>"]
        extractEnvFromRoot_177["extractEnvFromRoot (+1)<br/><small>Readonly&lt;Record&lt;string, string...</small>"]
        buildEnvMap_179["buildEnvMap<br/><small>Record&lt;string, string&gt;</small>"]
        validateRootStructure_181["validateRootStructure (+1)<br/><small>Result&lt;Record&lt;string, unknown&gt;...</small>"]
        discoverFlowFiles_188["discoverFlowFiles<br/><small>ResultAsync&lt;readonly string(),...</small>"]
        checkEnvironment_189["checkEnvironment<br/><small>ResultAsync&lt;void, Orchestrator...</small>"]
    end

    %% Edges (Data Flow: 往路→ / 復路←)
    executeSingleFlow_3 -->|"string"| generateSessionName_4
    generateSessionName_4 -.->|"string"| executeSingleFlow_3
    generateSessionName_4 -->|"RunFlowsInput"| notifyFlowProgress_5
    notifyFlowProgress_5 -.->|"void"| generateSessionName_4
    notifyFlowProgress_5 -->|"string"| buildFlowExecutionOptions_6
    buildFlowExecutionOptions_6 -.->|"FlowExecutionOptions"| notifyFlowProgress_5
    executeFlow_7 -->|"FlowExecutionOptions"| buildExecutionContext_8
    buildExecutionContext_8 -.->|"ExecutionContext"| executeFlow_7
    executeAllSteps_9 -->|"StepProgressCallback /..."| isStepProgressCallback_10
    isStepProgressCallback_10 -.->|"boolean"| executeAllSteps_9
    handleAssertChecked_13 -->|"ResolvedAssertCheckedC..."| getSelectorForErrorMessage_14
    getSelectorForErrorMessage_14 -.->|"string"| handleAssertChecked_13
    getSelectorForErrorMessage_14 -->|"( ctx: CheckedContext;..."| checkChecked_16
    checkChecked_16 -.->|"CommandResult"| getSelectorForErrorMessage_14
    browserIsChecked_17 -->|"'is'"| executeCommand_18
    executeCommand_18 -.->|"string"| browserIsChecked_17
    checkChecked_16 -->|"CheckedContext"| browserIsChecked_17
    browserIsChecked_17 -.->|"( checked: boolean; )"| checkChecked_16
    resolveCliSelector_20 -.->|"( css?: undefined; int..."| asCliXpathSelector_21
    asCliXpathSelector_21 -.->|"Result&lt;string & Brand&lt;..."| resolveCliSelector_20
    resolveCliSelector_20 -.->|"( css?: undefined; any..."| asCliTextSelector_22
    asCliTextSelector_22 -.->|"Result&lt;string & Brand&lt;..."| resolveCliSelector_20
    browserIsChecked_17 -->|"ResolvedAssertCheckedC..."| resolveCliSelector_20
    resolveCliSelector_20 -.->|"CliSelector"| browserIsChecked_17
    executeResolvedCommand_12 -.->|"ResolvedAssertCheckedC..."| handleAssertChecked_13
    handleAssertChecked_13 -.->|"CommandResult"| executeResolvedCommand_12
    handleAssertEnabled_23 -->|"ResolvedAssertEnabledC..."| getSelectorForErrorMessage_24
    getSelectorForErrorMessage_24 -.->|"string"| handleAssertEnabled_23
    getSelectorForErrorMessage_24 -->|"( ctx: VisibilityConte..."| checkEnabled_25
    checkEnabled_25 -.->|"CommandResult"| getSelectorForErrorMessage_24
    browserIsEnabled_26 -->|"'is'"| executeCommand_27
    executeCommand_27 -.->|"string"| browserIsEnabled_26
    checkEnabled_25 -->|"VisibilityContext"| browserIsEnabled_26
    browserIsEnabled_26 -.->|"( enabled: boolean; )"| checkEnabled_25
    browserIsEnabled_26 -->|"ResolvedAssertEnabledC..."| resolveCliSelector_29
    resolveCliSelector_29 -.->|"CliSelector"| browserIsEnabled_26
    executeResolvedCommand_12 -.->|"ResolvedAssertEnabledC..."| handleAssertEnabled_23
    handleAssertEnabled_23 -.->|"CommandResult"| executeResolvedCommand_12
    handleAssertNotVisible_30 -->|"ResolvedAssertNotVisib..."| getSelectorString_31
    getSelectorString_31 -.->|"string"| handleAssertNotVisible_30
    getSelectorString_31 -->|"ResolvedAssertNotVisib..."| isTextSelector_32
    isTextSelector_32 -.->|"boolean"| getSelectorString_31
    isTextSelector_32 -->|"string"| handleTextSelectorNotVisible_33
    handleTextSelectorNotVisible_33 -.->|"CommandResult"| isTextSelector_32
    getAndCheckNotVisible_36 -->|"VisibilityContext"| browserIsVisible_37
    browserIsVisible_37 -.->|"( visible: boolean; )"| getAndCheckNotVisible_36
    browserIsVisible_37 -->|"CliSelector"| getSelectorForErrorMessage_38
    getSelectorForErrorMessage_38 -.->|"string"| browserIsVisible_37
    handleTextSelectorNotVisible_33 -->|"?"| getAndCheckNotVisible_36
    getAndCheckNotVisible_36 -.->|"CommandResult"| handleTextSelectorNotVisible_33
    executeResolvedCommand_12 -.->|"ResolvedAssertNotVisib..."| handleAssertNotVisible_30
    handleAssertNotVisible_30 -.->|"CommandResult"| executeResolvedCommand_12
    handleAssertVisible_42 -->|"ResolvedAssertVisibleC..."| getSelectorString_43
    getSelectorString_43 -.->|"string"| handleAssertVisible_42
    getSelectorString_43 -->|"ResolvedAssertVisibleC..."| isTextSelector_44
    isTextSelector_44 -.->|"boolean"| getSelectorString_43
    handleTextSelectorVisible_45 -->|"string"| browserWaitForText_46
    browserWaitForText_46 -.->|"()"| handleTextSelectorVisible_45
    isTextSelector_44 -->|"string"| handleTextSelectorVisible_45
    handleTextSelectorVisible_45 -.->|"CommandResult"| isTextSelector_44
    waitForElement_47 -->|"ResolvedSelectorSpec"| isTextSelector_48
    isTextSelector_48 -.->|"boolean"| waitForElement_47
    isTextSelector_48 -->|"ResolvedSelectorSpec"| getSelectorString_49
    getSelectorString_49 -.->|"string"| isTextSelector_48
    getSelectorString_49 -->|"string"| browserWaitForText_50
    browserWaitForText_50 -.->|"()"| getSelectorString_49
    browserWaitForText_50 -->|"CliSelector"| browserWaitForSelector_51
    browserWaitForSelector_51 -.->|"()"| browserWaitForText_50
    browserWaitForSelector_51 -->|"ResolvedSelectorSpec"| resolveCliSelector_52
    resolveCliSelector_52 -.->|"CliSelector"| browserWaitForSelector_51
    handleTextSelectorVisible_45 -->|"ResolvedAssertVisibleC..."| waitForElement_47
    waitForElement_47 -.->|"undefined"| handleTextSelectorVisible_45
    getAndCheckVisibility_53 -->|"VisibilityContext"| browserIsVisible_54
    browserIsVisible_54 -.->|"( visible: boolean; )"| getAndCheckVisibility_53
    browserIsVisible_54 -->|"CliSelector"| getSelectorForErrorMessage_55
    getSelectorForErrorMessage_55 -.->|"string"| browserIsVisible_54
    waitForElement_47 -->|"?"| getAndCheckVisibility_53
    getAndCheckVisibility_53 -.->|"CommandResult"| waitForElement_47
    executeResolvedCommand_12 -.->|"ResolvedAssertVisibleC..."| handleAssertVisible_42
    handleAssertVisible_42 -.->|"CommandResult"| executeResolvedCommand_12
    browserEval_59 -->|"'eval'"| executeCommand_60
    executeCommand_60 -.->|"string"| browserEval_59
    handleEval_58 -->|"string & Brand&lt;'JsExpr..."| browserEval_59
    browserEval_59 -.->|"( result: unknown; )"| handleEval_58
    executeResolvedCommand_12 -.->|"EvalCommand"| handleEval_58
    handleEval_58 -.->|"CommandResult"| executeResolvedCommand_12
    browserScreenshot_63 -->|"string"| validateAndExtractData_64
    validateAndExtractData_64 -.->|"Result&lt;InferOutput&lt;T&gt;,..."| browserScreenshot_63
    handleScreenshot_62 -->|"string & Brand&lt;'FilePa..."| browserScreenshot_63
    browserScreenshot_63 -.->|"( path: string; )"| handleScreenshot_62
    executeResolvedCommand_12 -.->|"ScreenshotCommand"| handleScreenshot_62
    handleScreenshot_62 -.->|"CommandResult"| executeResolvedCommand_12
    handleWait_66 -->|"number"| createResultMapper_67
    createResultMapper_67 -.->|"&lt;T&gt;(output: T) =&gt; Comm..."| handleWait_66
    browserWaitForFunction_68 -->|"'wait'"| executeCommand_69
    executeCommand_69 -.->|"string"| browserWaitForFunction_68
    createResultMapper_67 -.->|"( command: 'wait'; ) &..."| browserWaitForFunction_68
    browserWaitForFunction_68 -.->|"()"| createResultMapper_67
    browserWaitForUrl_71 -->|"'wait'"| executeCommand_72
    executeCommand_72 -.->|"string"| browserWaitForUrl_71
    createResultMapper_67 -.->|"( command: 'wait'; ) &..."| browserWaitForUrl_71
    browserWaitForUrl_71 -.->|"()"| createResultMapper_67
    browserWaitForLoad_74 -->|"'wait'"| executeCommand_75
    executeCommand_75 -.->|"string"| browserWaitForLoad_74
    createResultMapper_67 -.->|"( command: 'wait'; ) &..."| browserWaitForLoad_74
    browserWaitForLoad_74 -.->|"()"| createResultMapper_67
    createResultMapper_67 -.->|"( command: 'wait'; ) &..."| asCliXpathSelector_77
    asCliXpathSelector_77 -.->|"Result&lt;string & Brand&lt;..."| createResultMapper_67
    createResultMapper_67 -.->|"( command: 'wait'; ) &..."| browserWaitForText_78
    browserWaitForText_78 -.->|"()"| createResultMapper_67
    createResultMapper_67 -.->|"( command: 'wait'; ) &..."| browserWaitForSelector_79
    browserWaitForSelector_79 -.->|"()"| createResultMapper_67
    browserWaitForMs_80 -->|"'wait'"| executeCommand_81
    executeCommand_81 -.->|"string"| browserWaitForMs_80
    createResultMapper_67 -.->|"( command: 'wait'; ) &..."| browserWaitForMs_80
    browserWaitForMs_80 -.->|"()"| createResultMapper_67
    executeResolvedCommand_12 -.->|"WaitCommand"| handleWait_66
    handleWait_66 -.->|"CommandResult"| executeResolvedCommand_12
    handleScrollIntoView_83 -->|"ResolvedScrollIntoView..."| getSelectorString_84
    getSelectorString_84 -.->|"string"| handleScrollIntoView_83
    getSelectorString_84 -->|"ResolvedScrollIntoView..."| isTextSelector_85
    isTextSelector_85 -.->|"boolean"| getSelectorString_84
    handleTextSelectorScrollIntoView_86 -->|"?"| asCliTextSelector_87
    asCliTextSelector_87 -.->|"Result&lt;string & Brand&lt;..."| handleTextSelectorScrollIntoView_86
    asCliTextSelector_87 -->|"string"| browserWaitForText_88
    browserWaitForText_88 -.->|"()"| asCliTextSelector_87
    isTextSelector_85 -->|"string"| handleTextSelectorScrollIntoView_86
    handleTextSelectorScrollIntoView_86 -.->|"CommandResult"| isTextSelector_85
    handleCssOrRefScrollIntoView_90 -->|"ResolvedScrollIntoView..."| resolveCliSelector_91
    resolveCliSelector_91 -.->|"CliSelector"| handleCssOrRefScrollIntoView_90
    resolveCliSelector_91 -->|"CliSelector"| browserScrollIntoView_92
    browserScrollIntoView_92 -.->|"()"| resolveCliSelector_91
    handleTextSelectorScrollIntoView_86 -->|"ResolvedScrollIntoView..."| handleCssOrRefScrollIntoView_90
    handleCssOrRefScrollIntoView_90 -.->|"CommandResult"| handleTextSelectorScrollIntoView_86
    executeResolvedCommand_12 -.->|"ResolvedScrollIntoView..."| handleScrollIntoView_83
    handleScrollIntoView_83 -.->|"CommandResult"| executeResolvedCommand_12
    browserScroll_94 -->|"'scroll'"| executeCommand_95
    executeCommand_95 -.->|"string"| browserScroll_94
    handleScroll_93 -->|"ScrollDirection"| browserScroll_94
    browserScroll_94 -.->|"()"| handleScroll_93
    executeResolvedCommand_12 -.->|"ScrollCommand"| handleScroll_93
    handleScroll_93 -.->|"CommandResult"| executeResolvedCommand_12
    browserSelect_98 -->|"'select'"| executeCommand_99
    executeCommand_99 -.->|"string"| browserSelect_98
    handleSelect_97 -->|"CliSelector"| browserSelect_98
    browserSelect_98 -.->|"()"| handleSelect_97
    browserSelect_98 -->|"ResolvedSelectCommand"| resolveCliSelector_101
    resolveCliSelector_101 -.->|"CliSelector"| browserSelect_98
    executeResolvedCommand_12 -.->|"ResolvedSelectCommand"| handleSelect_97
    handleSelect_97 -.->|"CommandResult"| executeResolvedCommand_12
    browserHover_103 -->|"'hover'"| executeCommand_104
    executeCommand_104 -.->|"string"| browserHover_103
    handleHover_102 -->|"CliSelector"| browserHover_103
    browserHover_103 -.->|"()"| handleHover_102
    browserHover_103 -->|"ResolvedHoverCommand"| resolveCliSelector_106
    resolveCliSelector_106 -.->|"CliSelector"| browserHover_103
    executeResolvedCommand_12 -.->|"ResolvedHoverCommand"| handleHover_102
    handleHover_102 -.->|"CommandResult"| executeResolvedCommand_12
    browserPress_108 -->|"'press'"| executeCommand_109
    executeCommand_109 -.->|"string"| browserPress_108
    handlePress_107 -->|"string & Brand&lt;'Keyboa..."| browserPress_108
    browserPress_108 -.->|"()"| handlePress_107
    executeResolvedCommand_12 -.->|"PressCommand"| handlePress_107
    handlePress_107 -.->|"CommandResult"| executeResolvedCommand_12
    browserFill_112 -->|"'fill'"| executeCommand_113
    executeCommand_113 -.->|"string"| browserFill_112
    handleFill_111 -->|"CliSelector"| browserFill_112
    browserFill_112 -.->|"()"| handleFill_111
    browserFill_112 -->|"ResolvedFillCommand"| resolveCliSelector_115
    resolveCliSelector_115 -.->|"CliSelector"| browserFill_112
    executeResolvedCommand_12 -.->|"ResolvedFillCommand"| handleFill_111
    handleFill_111 -.->|"CommandResult"| executeResolvedCommand_12
    browserType_117 -->|"'type'"| executeCommand_118
    executeCommand_118 -.->|"string"| browserType_117
    handleType_116 -->|"CliSelector"| browserType_117
    browserType_117 -.->|"()"| handleType_116
    browserType_117 -->|"ResolvedTypeCommand"| resolveCliSelector_120
    resolveCliSelector_120 -.->|"CliSelector"| browserType_117
    executeResolvedCommand_12 -.->|"ResolvedTypeCommand"| handleType_116
    handleType_116 -.->|"CommandResult"| executeResolvedCommand_12
    browserClick_122 -->|"'click'"| executeCommand_123
    executeCommand_123 -.->|"string"| browserClick_122
    handleClick_121 -->|"CliSelector"| browserClick_122
    browserClick_122 -.->|"()"| handleClick_121
    browserClick_122 -->|"ResolvedClickCommand"| resolveCliSelector_125
    resolveCliSelector_125 -.->|"CliSelector"| browserClick_122
    executeResolvedCommand_12 -.->|"ResolvedClickCommand"| handleClick_121
    handleClick_121 -.->|"CommandResult"| executeResolvedCommand_12
    browserOpen_127 -->|"'open'"| executeCommand_128
    executeCommand_128 -.->|"string"| browserOpen_127
    handleOpen_126 -->|"string & Brand&lt;'Url'&gt;"| browserOpen_127
    browserOpen_127 -.->|"( url: string; )"| handleOpen_126
    executeResolvedCommand_12 -.->|"OpenCommand"| handleOpen_126
    handleOpen_126 -.->|"CommandResult"| executeResolvedCommand_12
    executeStep_11 -->|"ResolvedCommand"| executeResolvedCommand_12
    executeResolvedCommand_12 -.->|"CommandResult"| executeStep_11
    executeResolvedCommand_12 -->|"Command"| processSelectorWait_130
    processSelectorWait_130 -.->|"ResolvedCommand"| executeResolvedCommand_12
    captureErrorScreenshot_149 -->|"string"| asFilePath_150
    asFilePath_150 -.->|"Result&lt;string & Brand&lt;..."| captureErrorScreenshot_149
    asFilePath_150 -->|"string & Brand&lt;'FilePa..."| browserScreenshot_151
    browserScreenshot_151 -.->|"( path: string; )"| asFilePath_150
    takeErrorScreenshot_148 -->|"ExecutionContext"| captureErrorScreenshot_149
    captureErrorScreenshot_149 -.->|"string"| takeErrorScreenshot_148
    processSelectorWait_130 -->|"ExecutionContext"| takeErrorScreenshot_148
    takeErrorScreenshot_148 -.->|"ScreenshotResult"| processSelectorWait_130
    isStepProgressCallback_10 -->|"Command"| executeStep_11
    executeStep_11 -.->|"StepResult"| isStepProgressCallback_10
    buildExecutionContext_8 -->|"Flow"| executeAllSteps_9
    executeAllSteps_9 -.->|"ExecuteAllStepsResult"| buildExecutionContext_8
    buildFlowExecutionOptions_6 -->|"Flow"| executeFlow_7
    executeFlow_7 -.->|"FlowResult"| buildFlowExecutionOptions_6
    browserClose_158 -->|"'close'"| executeCommand_159
    executeCommand_159 -.->|"string"| browserClose_158
    executeFlow_7 -->|"string"| browserClose_158
    browserClose_158 -.->|"()"| executeFlow_7
    browserClose_158 -->|"ScreenshotResult"| getScreenshotPath_161
    getScreenshotPath_161 -.->|"string / undefined"| browserClose_158
    executeAllFlowsParallel_2 -->|"Flow"| executeSingleFlow_3
    executeSingleFlow_3 -.->|"FlowRunSummary"| executeAllFlowsParallel_2
    executeAllFlows_1 -->|"readonly Flow()"| executeAllFlowsParallel_2
    executeAllFlowsParallel_2 -.->|"RunFlowsOutput"| executeAllFlows_1
    runFlows_0 -->|"readonly Flow()"| executeAllFlows_1
    executeAllFlows_1 -.->|"RunFlowsOutput"| runFlows_0
    resolveEnvVariables_168 -->|"Readonly&lt;Record&lt;string..."| mergeEnvMaps_169
    mergeEnvMaps_169 -.->|"Record&lt;string, string&gt;"| resolveEnvVariables_168
    resolveStepVariables_170 -->|"unknown"| isRecord_171
    isRecord_171 -.->|"boolean"| resolveStepVariables_170
    resolveObjectVariables_172 -->|"string"| resolveStringVariables_173
    resolveStringVariables_173 -.->|"Result&lt;string, ParseEr..."| resolveObjectVariables_172
    resolveStringVariables_173 -->|"unknown"| isRecord_174
    isRecord_174 -.->|"boolean"| resolveStringVariables_173
    isRecord_174 -->|"Record&lt;string, unknown&gt;"| resolveObjectVariables_175
    resolveObjectVariables_175 -.->|"Result&lt;void, ParseError&gt;"| isRecord_174
    isRecord_171 -->|"Record&lt;string, unknown&gt;"| resolveObjectVariables_172
    resolveObjectVariables_172 -.->|"Result&lt;void, ParseError&gt;"| isRecord_171
    mergeEnvMaps_169 -->|"unknown()"| resolveStepVariables_170
    resolveStepVariables_170 -.->|"Result&lt;unknown, ParseE..."| mergeEnvMaps_169
    parseFlowYaml_167 -->|"RawFlowData"| resolveEnvVariables_168
    resolveEnvVariables_168 -.->|"Result&lt;RawFlowData, Pa..."| parseFlowYaml_167
    extractEnvFromRoot_177 -->|"unknown"| isRecord_178
    isRecord_178 -.->|"boolean"| extractEnvFromRoot_177
    isRecord_178 -->|"Record&lt;string, unknown&gt;"| buildEnvMap_179
    buildEnvMap_179 -.->|"Record&lt;string, string&gt;"| isRecord_178
    buildRawFlowData_176 -->|"Record&lt;string, unknown&gt;"| extractEnvFromRoot_177
    extractEnvFromRoot_177 -.->|"Readonly&lt;Record&lt;string..."| buildRawFlowData_176
    resolveEnvVariables_168 -->|"?"| buildRawFlowData_176
    buildRawFlowData_176 -.->|"RawFlowData"| resolveEnvVariables_168
    validateRootStructure_181 -->|"unknown"| isRecord_182
    isRecord_182 -.->|"boolean"| validateRootStructure_181
    buildRawFlowData_176 -->|"?"| validateRootStructure_181
    validateRootStructure_181 -.->|"Result&lt;Record&lt;string, ..."| buildRawFlowData_176
    parseYaml_166 -->|"string"| parseFlowYaml_167
    parseFlowYaml_167 -.->|"Result&lt;Flow, ParseError&gt;"| parseYaml_166
    loadSingleFlow_165 -->|"string"| parseYaml_166
    parseYaml_166 -.->|"Flow"| loadSingleFlow_165
    loadAllFlows_164 -->|"string"| loadSingleFlow_165
    loadSingleFlow_165 -.->|"Flow"| loadAllFlows_164
    executeAllFlows_1 -->|"readonly string()"| loadAllFlows_164
    loadAllFlows_164 -.->|"readonly Flow()"| executeAllFlows_1
    loadAllFlows_164 -->|"?"| discoverFlowFiles_188
    discoverFlowFiles_188 -.->|"readonly string()"| loadAllFlows_164
    checkEnvironment_189 -->|"?"| checkAgentBrowser_190
    checkAgentBrowser_190 -.->|"string"| checkEnvironment_189
    discoverFlowFiles_188 -->|"?"| checkEnvironment_189
    checkEnvironment_189 -.->|"void"| discoverFlowFiles_188