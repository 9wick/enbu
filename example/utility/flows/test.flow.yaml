# Utilityコマンドのテストフロー
# ポート3040を使用（example/utilityサーバー専用ポート）
# テスト用HTTPサーバー（localhost:3040）が起動していることを前提とする

env:
  BASE_URL: http://localhost:3040

steps:
  # ステップ1: ページを開く
  - open: ${BASE_URL}

  # ステップ2: "Utility Test"の表示確認
  - assertVisible: Utility Test

  # ステップ3: 2秒待機
  - wait: 2000

  # ステップ4: 遅延表示要素の出現を待機（3秒後に表示される）
  # HTMLのh2テキスト「遅延表示コンテンツ」を使用
  - wait: 遅延表示コンテンツ

  # ステップ5: 遅延表示要素の確認
  - assertVisible: 遅延表示コンテンツ

  # ステップ6: スクリーンショット保存（通常）
  - screenshot: ./screenshots/page.png

  # ステップ7: スクリーンショット保存（フルページ）
  - screenshot:
      path: ./screenshots/fullpage.png
      fullPage: true

  # ステップ8: ページ構造スナップショット
  - snapshot: {}

  # ステップ9: JavaScript実行してタイトル取得
  - eval: "document.title"
